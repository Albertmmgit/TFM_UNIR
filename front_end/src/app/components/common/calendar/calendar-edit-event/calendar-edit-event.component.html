<div class="modal-dialog modal-xl modal-dialog-centered custom-dialog">
  <div class="modal-content shadow p-4 rounded">
    <div class="modal-header">
      <h3 class="modal-title text-center w-100">
        {{ isNewEvent ? 'Crear Evento ‚úèÔ∏è' : 'Editar Evento üñäÔ∏è' }}
      </h3>
      <button type="button" class="btn-close" aria-label="Cerrar" (click)="closeDialog()"></button>
    </div>

    <div class="modal-body">
      <form [formGroup]="eventForm" class="row g-4">
        <!-- T√≠tulo -->
        <div class="col-12">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label><mat-icon>title</mat-icon> T√≠tulo</mat-label>
            <input matInput formControlName="title" placeholder="T√≠tulo del evento" />
          </mat-form-field>
        </div>

        <!-- Descripci√≥n -->
        <div class="col-12">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label><mat-icon>description</mat-icon> Descripci√≥n</mat-label>
            <textarea
              matInput
              formControlName="description"
              rows="4"
              placeholder="Descripci√≥n del evento"
            ></textarea>
          </mat-form-field>
        </div>

        <!-- Inicio -->
        <div class="col-md-6">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label><mat-icon>schedule</mat-icon> Inicio</mat-label>
            <input matInput type="datetime-local" formControlName="start" />
          </mat-form-field>
        </div>

        <!-- Fin -->
        <div class="col-md-6">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label><mat-icon>schedule</mat-icon> Fin</mat-label>
            <input matInput type="datetime-local" formControlName="end" />
          </mat-form-field>
        </div>

        <!-- Modalidad -->
        <div class="col-md-6">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label><mat-icon>place</mat-icon> Modalidad</mat-label>
            <mat-select formControlName="locationType" (selectionChange)="onModalityChange($event.value)">
              <mat-option *ngFor="let modality of ['Presential', 'Online']" [value]="modality">
                {{ modality === 'Presential' ? 'Presencial' : 'Online' }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <!-- Tipo de Evento -->
        <div class="col-md-6">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label><mat-icon>event</mat-icon> Tipo de Evento</mat-label>
            <mat-select formControlName="eventType">
              <mat-option [value]="null">Ninguno</mat-option>
              <mat-option *ngFor="let type of eventTypes" [value]="type">
                {{ type === 'task' ? 'Tarea' : 'Clase' }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <!-- Enlace de reuni√≥n -->
        <div class="col-md-6">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label><mat-icon>link</mat-icon> Enlace de Reuni√≥n</mat-label>
            <input matInput formControlName="onlineLink" placeholder="Ingrese el enlace de reuni√≥n" />
          </mat-form-field>
        </div>

        <!-- Curso -->
        <div class="col-md-6">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label><mat-icon>school</mat-icon> Curso</mat-label>
            <mat-select formControlName="courseId">
              <mat-option *ngFor="let course of courses" [value]="course.id">
                {{ course.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <!-- Materia -->
        <div class="col-md-6" *ngIf="subjects.length > 0">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label><mat-icon>book</mat-icon> Materia</mat-label>
            <mat-select formControlName="subjectId">
              <mat-option *ngFor="let subject of subjects" [value]="subject.id">
                {{ subject.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </form>
    </div>

    <div class="modal-footer d-flex justify-content-between">
      <button mat-button class="btn btn-danger btn-lg" (click)="closeDialog()">
        <mat-icon>cancel</mat-icon> Cancelar
      </button>
      <button mat-button class="btn btn-warning btn-lg" *ngIf="!isNewEvent" (click)="deleteEvent()">
        <mat-icon>delete</mat-icon> Eliminar
      </button>
      <button mat-button class="btn btn-success btn-lg" [disabled]="eventForm.invalid" (click)="save()">
        <mat-icon>save</mat-icon> Guardar
      </button>
    </div>
  </div>
</div>
