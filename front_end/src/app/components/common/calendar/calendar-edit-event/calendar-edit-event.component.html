<div class="modal-dialog modal-xl modal-dialog-centered custom-dialog">
  <div class="modal-content shadow p-4 rounded">
    <div class="modal-header">
      <h3 class="modal-title text-center w-100">
        {{ isNewEvent ? 'Crear Evento' : 'Editar Evento' }}
      </h3>      <button type="button" class="btn-close" aria-label="Close" (click)="closeDialog()"></button>
    </div>

    <div class="modal-body">
      <form [formGroup]="eventForm" class="row g-4">
        <!-- Título -->
        <div class="col-12">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Título</mat-label>
            <input matInput formControlName="title" placeholder="Título del evento" />
          </mat-form-field>
        </div>

        <!-- Descripción -->
        <div class="col-12">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Descripción</mat-label>
            <textarea matInput formControlName="description" rows="4" placeholder="Descripción del evento"></textarea>
          </mat-form-field>
        </div>

        <!-- Fecha y hora de inicio -->
        <div class="col-md-6">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Inicio</mat-label>
            <input matInput type="datetime-local" formControlName="start" />
          </mat-form-field>
        </div>

        <!-- Fecha y hora de fin -->
        <div class="col-md-6">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Fin</mat-label>
            <input matInput type="datetime-local" formControlName="end" />
          </mat-form-field>
        </div>

        <!-- Modalidad -->
        <div class="col-md-6">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Modalidad</mat-label>
            <mat-select formControlName="locationType" (selectionChange)="onModalityChange($event.value)">
              <mat-option *ngFor="let modality of ['Presential', 'Online']" [value]="modality">
                {{ modality }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <!-- Tipo de Evento (Readonly) -->
        <div class="col-md-6">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Tipo de Evento</mat-label>
            <input matInput [value]="eventForm.get('eventType')?.value" readonly />
          </mat-form-field>
        </div>

        <!-- Enlace de Reunión -->
        <div class="col-md-6">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Enlace de Reunión</mat-label>
            <input matInput formControlName="onlineLink" placeholder="Ingrese el enlace de reunión" />
          </mat-form-field>
        </div>

        <!-- Curso -->
        <div class="col-md-6">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Curso</mat-label>
            <mat-select formControlName="courseId">
              <mat-option *ngFor="let course of courses" [value]="course.id">
                {{ course.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <!-- Materia -->
        <div class="col-md-6" *ngIf="subjects.length > 0">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Materia</mat-label>
            <mat-select formControlName="subjectId">
              <mat-option *ngFor="let subject of subjects" [value]="subject.id">
                {{ subject.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </form>
    </div>

    <div class="modal-footer d-flex justify-content-between">
      <button mat-button class="btn btn-danger btn-lg" (click)="closeDialog()">Cancelar</button>
      <button mat-button class="btn btn-success btn-lg" [disabled]="eventForm.invalid" (click)="save()">Guardar</button>
    </div>
  </div>
</div>
